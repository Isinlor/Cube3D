<canvas id="canvas1" width="800" height="800"></canvas>
<script>
function setPixel(imageData, x, y, rgb=[0,0,0], a = 255) {
    index = (x + y * imageData.width) * 4;
    imageData.data[index+0] = rgb[0];
    imageData.data[index+1] = rgb[1];
    imageData.data[index+2] = rgb[2];
    imageData.data[index+3] = a;
    return;
}
function drawLine(point1, point2) {
	if (point2[1] == point1[1] && point2[0] == point1[0]) {
    	setPixel(imageData, point2[1], point2[0]);
	} else {
		var dx = point1[1] - point2[1]; 
		var sx = (dx < 0) ? -1 : 1;
		var dy = point1[0] - point2[0]; 
		var sy = (dy < 0) ? -1 : 1;

		if (Math.abs(dy) < Math.abs(dx))
		{    
		    var a = dy / dx;
		    var b = point2[0] - a * point2[1];
		    var i = point2[1];
		    while (i != point1[1])
		    {
		        setPixel(imageData, Math.round(a*i + b), i);
		        i += sx;
		    }
		} 
		else 
		{
		    var a = dx / dy;
		    var b = point2[1] - a * point2[0];
		    var i = point2[0];
		    while (i != point1[0])
		    {
		        setPixel(imageData, i, Math.round(a*i + b));
		        i += sy;
		    }    
		}
	}
	return;
}

function reset () {
	for (var i=0;i<imageData.data.length;i+=4) {
	  // imageData.data[i+0]=255;
	  // imageData.data[i+1]=255;
	  // imageData.data[i+2]=255;
	  imageData.data[i+3]=0;
    }
}
function draw () {
	reset();
	var A = new point(200, 200);
	var B = new point(400, 400);
	var C = new point(400, 200);
	var ABC = new triangle(A, B, C);
	var cen = ABC.getCenter();
	setPixel(imageData, cen.x, cen.y);
	ABC.rotate(cen, n);
	ABC.draw();
	c.putImageData(imageData, 0, 0);
	n = n + 0.1;
}
element = document.getElementById("canvas1");
c = element.getContext("2d");

var point = function point (x, y) {
	this.x = x;
	this.y = y;
}
point.prototype = {
	rotate: function (center, theta) {
		var cosTheta = Math.cos(theta);
		var sinTheta = Math.sin(theta);
		this.translate(-center.x, -center.y);
	    var p0 = this.x*cosTheta-this.y*sinTheta;
	    var p1 = this.x*sinTheta+this.y*cosTheta;
		this.x = p0;
		this.y = p1;
		this.round();
		this.translate(center.x, center.y);
	},
	translate: function (x, y) {
		this.x += x;
		this.y += y;
	},
	round: function() {
		this.x = Math.round(this.x);
		this.y = Math.round(this.y);
	},
	draw: function() {

	}
}
var triangle = function triangle (A, B, C) {
	this.A = A;
	this.B = B;
	this.C = C;
}
triangle.prototype = { 
	rotate: function(center, theta) {
		this.A.rotate(center, theta);
		this.B.rotate(center, theta);
		this.C.rotate(center, theta);
	},
	translate: function(x, y) {
		this.A.translate(x, y);
		this.B.translate(x, y);
		this.C.translate(x, y);
	},
	draw: function() {
		drawLine([this.A.x, this.A.y], [this.B.x, this.B.y]);
		drawLine([this.B.x, this.B.y], [this.C.x, this.C.y]);
		drawLine([this.C.x, this.C.y], [this.A.x, this.A.y]);
	},
	getCenter: function() {
		var center = new point();
		center.x = (this.A.x + this.B.x + this.C.x)/3;
		center.y = (this.A.y + this.B.y + this.C.y)/3;
		center.round();
		return center;
	}
}

// read the width and height of the canvas
width = element.width;
height = element.height;

// create a new pixel array
imageData = c.createImageData(width, height);
// var A = [200, 350];
// var B = [350, 600];
// var C = [200, 200];
// var ABC = [A, B, C];
var n = 0;


var A = new point(200, 200);
var B = new point(400, 400);
var C = new point(400, 200);
var ABC = new triangle(A, B, C);
var cen = ABC.getCenter();
setPixel(imageData, cen.x, cen.y);
ABC.rotate(cen, 3);
ABC.draw();

setInterval(draw, 10);

// copy the image data back onto the canvas
c.putImageData(imageData, 0, 0); // at coords 0,0
</script>